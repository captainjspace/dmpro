<!doctype html>
<html ng-app="App" class="no-js" lang="">
<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>Dungeon Master Pro Start Page</title>
	<meta name="description" content="dmpro">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="apple-touch-icon" href="apple-touch-icon.png">
	<!-- Place favicon.ico in the root directory -->

	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.0.0/angular-material.min.css">
	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" href="css/dmpro.css">
	<script src="js/vendor/modernizr-2.8.3.min.js"></script>

	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.min.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular-route.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-animate.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-aria.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-messages.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.0.0/angular-material.min.js"></script>
	<!-- Angular Material Library -->
	<script src="http://ajax.googleapis.com/ajax/libs/angular_material/1.1.0/angular-material.min.js"></script>

  <!-- nicer fonts -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link href="https://fonts.googleapis.com/css?family=Bree+Serif" rel="stylesheet">
</head>

<!-- cloaking hides template -->
<body class="dmpro" ng-controller="LayoutController" ng-cloak>

<div id="header" ng-controller="CharacterListController">
		<h1>Dungeon Master Pro Character Sheet </h1>
		<div id="menu">
			<md-menu-bar>
			  <md-menu md-offset="0 0">
			    <button ng-click="$mdOpenMenu()"><span class="menu-bar">CharacterList</span></button>
			    <md-menu-content width="400px" ng-controller="CharacterListController">
			      <md-menu-item ng-repeat="(key,value) in characterList">
			        <md-button ng-click="go(key)">{{value}}</md-button>
			      </md-menu-item>
			    </md-menu-content>
			  </md-menu>
				<md-menu md-offset="0 0">
			    <button ng-click="$mdOpenMenu()"><span class="menu-bar">Reference Data</span></button>
			    <md-menu-content width="400px">
			      <md-menu-item ng-repeat="key in ['Spells','Combat Tables','Saving Throws','Theiving','Turn Undead', 'Race Details', 'Class Details']">
			        <md-button ng-click="go(key)">{{key}}</md-button>
			      </md-menu-item>
			    </md-menu-content>
			  </md-menu>
				<md-menu md-offset="0 0">
			    <button ng-click="$mdOpenMenu()"><span class="menu-bar">Weapons, Armor and Equipment</span></button>
			    <md-menu-content width="400px">
			      <md-menu-item ng-repeat="key in ['Weapons','Armor','Equipment']">
			        <md-button ng-click="go(key)">{{key}}</md-button>
			      </md-menu-item>
			    </md-menu-content>
			  </md-menu>
			</md-menu-bar>
		</div>
</div>
<!-- Add your site or application content here -->
<md-sidenav md-component-id="left" class="md-sidenav-left">
	 Left Nav!
	 {{ test-element }}
 </md-sidenav>
<div ng-view></div>

<script src="js/plugins.js"></script>
<script src="js/main.js"></script>

<!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
<script>
(
	function(b, o, i, l, e, r) {
		b.GoogleAnalyticsObject = l;
		b[l] || (b[l] = function() {
			(b[l].q = b[l].q || []).push(arguments)
		});
		b[l].l = +new Date;
		e = o.createElement(i);
		r = o.getElementsByTagName(i)[0];
		e.src = 'https://www.google-analytics.com/analytics.js';
		r.parentNode.insertBefore(e, r)
	}(window, document, 'script', 'ga'));
	ga('create', 'UA-XXXXX-X', 'auto');
	ga('send', 'pageview');
	</script>
</body>

<script type="text/javascript">

var app = angular.module('App', ['ngRoute', 'ngMaterial']);

app.config(function ($routeProvider) {
	$routeProvider
	.when('/', {
		templateUrl: 'views/characterList.html',
		controller: 'CharacterListController'
	})
	.when('/:characterId', {
		templateUrl: 'views/charactersheet.html',
		controller: 'CharacterController'
	}).otherwise( {
		template : 'nothing'
	});
});
app.controller('LayoutController', function($scope) {
	$scope.test='test-element';
});

app.controller('CharacterController', function($scope,$http,$location,$routeParams) {
	//
	//$scope.id = window.location['hash'].split("/").pop();
	//console.log($scope.id);
	console.log($routeParams.characterId);
	$http.get('/api/character/'+$routeParams.characterId).then(function(response) {
		$scope.character = response.data;
	}); // this will return a promise to controller
});

app.controller('CharacterListController', function($scope,$http, $location) {
	$http.get('/api/allcharacters').then(function(response) {
		$scope.characterList = response.data;
	});

  //add nav function to scope
	$scope.go = function ( path ) {
		$location.path( path );
	};

	//ui function

});


</script>
</html>
